From 66986fbeaa7d9da813b2617259fb17c487444015 Mon Sep 17 00:00:00 2001
From: barracuda156 <vital.had@gmail.com>
Date: Sun, 14 Jan 2024 01:49:55 +0800
Subject: [PATCH 01/10] mozcfg-ppc32mac for Darwin PowerPC

---
 mozcfg-ppc32mac | 81 +++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 81 insertions(+)
 create mode 100644 mozcfg-ppc32mac

diff --git mozcfg-ppc32mac mozcfg-ppc32mac
new file mode 100644
index 0000000000..6a3f7ac2c4
--- /dev/null
+++ mozcfg-ppc32mac
@@ -0,0 +1,81 @@
+# This Source Code Form is subject to the terms of the Mozilla Public
+# License, v. 2.0. If a copy of the MPL was not distributed with this
+# file, You can obtain one at http://mozilla.org/MPL/2.0/.
+
+export CC="@CC@ -flax-vector-conversions -O2 -mcpu=G5 -mtune=G5 -falign-loops=16 -falign-functions=16 -falign-labels=16 -falign-jumps=16 -read_only_relocs suppress -force_cpusubtype_ALL -mdynamic-no-pic"
+export CXX="@CXX@ -flax-vector-conversions -fpermissive -O2 -mcpu=G5 -mtune=G5 -falign-loops=16 -falign-functions=16 -falign-labels=16 -falign-jumps=16 -read_only_relocs suppress -force_cpusubtype_ALL -mdynamic-no-pic"
+
+export LDFLAGS="-latomic"
+
+mk_add_options MOZ_UNIFY_BDATE=1
+
+mk_add_options MOZ_MAKE_FLAGS="-s -j@BUILD_JOBS@"
+mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj-ff-dbg
+
+ac_add_options --enable-altivec
+ac_add_options --enable-application=browser
+ac_add_options --enable-macos-target=10.6
+ac_add_options --enable-optimize
+ac_add_options --enable-prebinding
+ac_add_options --enable-webrtc
+
+#ac_add_options --enable-chrome-format=jar
+#ac_add_options --enable-install-strip
+#ac_add_options --enable-printing
+#ac_add_options --enable-strip
+
+ac_add_options --with-system-bz2
+ac_add_options --with-system-icu
+ac_add_options --with-system-jpeg
+ac_add_options --with-system-libvpx
+ac_add_options --with-system-nspr
+ac_add_options --with-system-nss
+ac_add_options --with-system-png
+ac_add_options --with-system-zlib
+
+ac_add_options --with-macos-sdk=/Developer/SDKs/MacOSX10.6.sdk
+
+# Temporary: there is some issue with system Kerberos/kim.h not being found.
+# Perhaps, rather use Macports one.
+ac_add_options --disable-negotiateauth
+
+ac_add_options --disable-alsa
+ac_add_options --disable-applemedia
+ac_add_options --disable-cpp-exceptions
+ac_add_options --disable-crashreporter
+ac_add_options --disable-dbus
+ac_add_options --disable-debug
+ac_add_options --disable-eme
+ac_add_options --disable-gamepad
+ac_add_options --disable-gio
+ac_add_options --disable-gstreamer
+ac_add_options --disable-mozril-geoloc
+ac_add_options --disable-necko-wifi
+ac_add_options --disable-parental-controls
+ac_add_options --disable-pulseaudio
+ac_add_options --disable-tests
+ac_add_options --disable-safe-browsing
+ac_add_options --disable-static
+ac_add_options --disable-updater
+ac_add_options --disable-webspeech
+ac_add_options --disable-webspeechtestbackend
+
+ac_add_options --with-branding=browser/branding/arcticfox
+
+
+# Options below are borrowed from mozcfg-ppc32linux for convenience and should not be used without reviewing.
+
+# only for gcc >= 6 and only if binaries are unstable, should be inserted automatically by configure if gcc >= 6
+#ac_add_options --enable-optimize="-g0 -O2 -fno-delete-null-pointer-checks -fno-lifetime-dse -fno-schedule-insns2"
+
+# gtk3 now supported and default, but gtk2 just looks better
+#ac_add_options --enable-default-toolkit=cairo-gtk2
+
+# Issue 162
+#ac_add_options --disable-precompiled-startupcache
+
+# For convenience, if needed
+#ac_add_options --enable-system-hunspell
+#ac_add_options --enable-system-sqlite
+#ac_add_options --enable-system-ffi
+#ac_add_options --enable-system-pixman
-- 
2.43.0

